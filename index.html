<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>HAPPY Valentine üíñ</title>
<style>
body{margin:0;overflow:hidden;font-family:sans-serif;background:black}
#screen1,#screen2{
  position:fixed;width:100%;height:100%;display:flex;
  flex-direction:column;justify-content:center;align-items:center;color:white
}
#screen1{background:linear-gradient(135deg,#ff9acb,#ff5ea8);z-index:3}
#screen2{background:#120018;display:none;z-index:2}
#openBtn{padding:15px 40px;font-size:22px;border:none;border-radius:30px;background:white;color:#ff4fa3;cursor:pointer}
#loadingBar{width:60%;height:12px;background:#333;border-radius:10px;margin-top:20px}
#progress{height:100%;width:0;background:#ff4fa3;border-radius:10px}
#loveText{position:absolute;bottom:6%;width:100%;text-align:center;font-size:28px;color:#ff79c6;text-shadow:0 0 25px #ff2e7a;display:none}
</style>
</head>
<body>

<!-- üéµ NH·∫†C N·ªÄN -->
<audio id="bgMusic" loop>
  <source src="VSTRA - Ai Ngo√†i Anh (Official Audio).mp3" type="audio/mpeg">
</audio>

<div id="screen1">
  <h1>G·ª≠i ng∆∞·ªùi t√¥i y√™u üíå</h1>
  <button id="openBtn">M·ªü th∆∞</button>
</div>

<div id="screen2">
  <h1>Loading ...</h1>
  <div id="loadingBar"><div id="progress"></div></div>
</div>

<div id="loveText">ƒê√¢y l√† b·∫•t ng·ªù d√†nh cho em mong em th√≠ch üíñ</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/OrbitControls.js"></script>
<script src="https://threejs.org/examples/js/loaders/FontLoader.js"></script>
<script src="https://threejs.org/examples/js/geometries/TextGeometry.js"></script>

<script>
openBtn.onclick=()=>{
  screen1.style.display="none";
  screen2.style.display="flex";
  let w=0;
  let load=setInterval(()=>{
    w+=2; progress.style.width=w+"%";
    if(w>=100){
      clearInterval(load);
      screen2.style.display="none";
      loveText.style.display="block";
      document.getElementById("bgMusic").play(); // üéµ ph√°t nh·∫°c
      init3D();
    }
  },40);
};

let scene,camera,renderer,controls,stage,textMeshes=[];
let autoRotate=true;

function init3D(){
  scene=new THREE.Scene();
  camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,0.1,2000);
  camera.position.set(0,60,250);
  renderer=new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(innerWidth,innerHeight);
  document.body.appendChild(renderer.domElement);

  controls=new THREE.OrbitControls(camera,renderer.domElement);
  controls.enableDamping=true;
  controls.addEventListener('start',()=>autoRotate=false);
  controls.addEventListener('end',()=>setTimeout(()=>autoRotate=true,2000));

  createHexagonStage();
  createTexts();
  animate();
}

function createHexagonStage(){
  stage=new THREE.Group();
  scene.add(stage);

  const radius=120, height=120;
  const loader=new THREE.TextureLoader();
  const images=["v·ª£ 8.jpg","v·ª£ 6.jpg","v·ª£ 7.jpg","v·ª£ 4.jpg","v·ª£ 5.jpg","v·ª£.jpg"];

  for(let i=0;i<6;i++){
    const angle=(i/6)*Math.PI*2;
    const x=Math.cos(angle)*radius;
    const z=Math.sin(angle)*radius;

    loader.load(images[i],texture=>{
      const plane=new THREE.Mesh(
        new THREE.PlaneGeometry(height,height),
        new THREE.MeshBasicMaterial({map:texture,side:THREE.DoubleSide})
      );
      plane.position.set(x,0,z);
      plane.lookAt(0,0,0);
      stage.add(plane);
    });
  }

  const hexShape=new THREE.Shape();
  for(let i=0;i<6;i++){
    const a=(i/6)*Math.PI*2;
    const x=Math.cos(a)*radius;
    const y=Math.sin(a)*radius;
    if(i===0) hexShape.moveTo(x,y);
    else hexShape.lineTo(x,y);
  }
  hexShape.closePath();

  const points=hexShape.getPoints();
  const geometry=new THREE.BufferGeometry().setFromPoints(points.map(p=>new THREE.Vector3(p.x,0,p.y)));
  const line=new THREE.LineLoop(geometry,new THREE.LineBasicMaterial({color:0xff2e93}));
  stage.add(line);
}

function createTexts(){
  const loader=new THREE.FontLoader();

  const words=[
    "HAPPY VALENTINE 14-2",
    "I LOVE YOU",
    "LOVE YOU FOREVER",
    "MY LOVE",
    "ANH YEU EM",
    "BE MINE"
  ];

  loader.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",font=>{
    for(let i=0;i<80;i++){

      const randomWord=words[Math.floor(Math.random()*words.length)];

      const mesh=new THREE.Mesh(
        new THREE.TextGeometry(randomWord,{
          font:font,
          size:5,
          height:1
        }),
        new THREE.MeshBasicMaterial({color:0xff4fa3})
      );

      mesh.position.set(
        (Math.random()-0.5)*600,
        (Math.random()-0.5)*300,
        (Math.random()-0.5)*600
      );

      scene.add(mesh);
      textMeshes.push(mesh);
    }
  });
}

function animate(){
  requestAnimationFrame(animate);

  stage.rotation.y+=0.003;

  if(autoRotate){
    textMeshes.forEach(t=>{
      t.position.applyAxisAngle(new THREE.Vector3(0,1,0),0.0008);
    });
  }

  textMeshes.forEach(t=>t.lookAt(camera.position));

  controls.update();
  renderer.render(scene,camera);
}

onresize=()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};
</script>
</body>
</html>
